{"version":3,"file":"createFetcher.js","sources":["../../src/createFetcher.js"],"sourcesContent":["// @flow\n\nimport {observe, send} from \"@absinthe/socket\";\n\nimport type {AbsintheSocket} from \"@absinthe/socket\";\nimport type {FetchFunction} from \"react-relay\";\n\n/**\n * Creates a Fetcher (Relay FetchFunction) using the given AbsintheSocket\n * instance\n */\nconst createFetcher = (\n  absintheSocket: AbsintheSocket,\n  onError?: (error: Error) => any\n): FetchFunction => ({text: operation}, variables) =>\n  new Promise((resolve, reject) =>\n    // $FlowFixMe: operation is always defined\n    observe(absintheSocket, send(absintheSocket, {operation, variables}), {\n      onError,\n      onAbort: reject,\n      onResult: resolve\n    })\n  );\n\nexport default createFetcher;\n"],"names":["createFetcher","absintheSocket","onError","variables","operation","text","Promise","resolve","reject","observe","send","onAbort","onResult"],"mappings":";;;;;;;;;;;;;AAOA;;;;IAIMA,aAAa,GAAG,uBACpBC,cADoB,EAEpBC,OAFoB;AAAA;;AAAA;;AAAA,SAGF,gBAAoBC,SAApB;AAAA;;AAAA,QAAQC,SAAR,QAAEC,IAAF;;AAAA;;AAAA,WAClB,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV;AAAA;;AAAA;AAEVC,QAAAA,cAAO,CAACR,cAAD,EAAiBS,WAAI,CAACT,cAAD,EAAiB;AAACG,UAAAA,SAAS,EAATA,SAAD;AAAYD,UAAAA,SAAS,EAATA;AAAZ,SAAjB,CAArB,EAA+D;AACpED,UAAAA,OAAO,EAAPA,OADoE;AAEpES,UAAAA,OAAO,EAAEH,MAF2D;AAGpEI,UAAAA,QAAQ,EAAEL;AAH0D,SAA/D;AAFG;AAAA,KAAZ,YADkB;AAAA,GAHE;AAAA,CAAH;;;;"}